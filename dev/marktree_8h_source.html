<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>Neovim: src/nvim/marktree.h Source File</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
<link href="http://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="navbar">
  <div class="container">
    <nav class="site-nav">
      <ul>
        <li><a href="http://neovim.io/">Neovim Home</a></li>
      </ul>
    </nav>
    <a href="index.html">
      <img src="logo-devdoc.png" class="logo" alt="Neovim Dev-Doc">
    </a>
  </div>
</header>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_bc030da22f6f77ebb27ffd39b609bafa.html">nvim</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">marktree.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="marktree_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef NVIM_MARKTREE_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define NVIM_MARKTREE_H</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="assert_8h.html">assert.h</a>&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assert_8h.html">nvim/assert.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="garray_8h.html">nvim/garray.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">nvim/map.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pos_8h.html">nvim/pos.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="types_8h.html">nvim/types.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="marktree_8h.html#a7bee4a62172040151049feb7aa61041e">   13</a></span>&#160;<span class="preprocessor">#define MT_MAX_DEPTH 20</span></div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="marktree_8h.html#a3d1558fd30d766d7805fa176d2a9a994">   14</a></span>&#160;<span class="preprocessor">#define MT_BRANCH_FACTOR 10</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="structmtpos__t.html">   16</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="structmtpos__t.html#a1492b94687ee7198d876c58e3671978b">   17</a></span>&#160;  int32_t <a class="code" href="structmtpos__t.html#a1492b94687ee7198d876c58e3671978b">row</a>;</div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="structmtpos__t.html#a71c9d0f352c99e025208d8be42be505e">   18</a></span>&#160;  int32_t <a class="code" href="structmtpos__t.html#a71c9d0f352c99e025208d8be42be505e">col</a>;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;} <a class="code" href="structmtpos__t.html">mtpos_t</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="marktree_8h.html#afd4cd3c77c5f0c1b926b1701ca5577db">   21</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structmtnode__s.html">mtnode_s</a> <a class="code" href="structmtnode__s.html">mtnode_t</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="structiterstate__t.html">   22</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="structiterstate__t.html#a719ba31fd2ccb40c217d70f7730720ec">   23</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structiterstate__t.html#a719ba31fd2ccb40c217d70f7730720ec">oldcol</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="structiterstate__t.html#a9ee20696c1947299a8fe7ca64f2966d9">   24</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structiterstate__t.html#a9ee20696c1947299a8fe7ca64f2966d9">i</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;} <a class="code" href="structiterstate__t.html">iterstate_t</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="structMarkTreeIter.html">   27</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="structMarkTreeIter.html#a50e2c9cf27566030f85518c9f39cd8d9">   28</a></span>&#160;  <a class="code" href="structmtpos__t.html">mtpos_t</a> <a class="code" href="structMarkTreeIter.html#a50e2c9cf27566030f85518c9f39cd8d9">pos</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="structMarkTreeIter.html#a41ac630c588c4c8c7279f75de01af7ef">   29</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structMarkTreeIter.html#a41ac630c588c4c8c7279f75de01af7ef">lvl</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="structMarkTreeIter.html#a8a6b6665a7d8979c91e3fee3cb9e63f3">   30</a></span>&#160;  <a class="code" href="structmtnode__s.html">mtnode_t</a> *<a class="code" href="structMarkTreeIter.html#a8a6b6665a7d8979c91e3fee3cb9e63f3">node</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="structMarkTreeIter.html#a9d7a252a9e89392b2c04a16f027ed73d">   31</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structMarkTreeIter.html#a9d7a252a9e89392b2c04a16f027ed73d">i</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="structMarkTreeIter.html#ae48f49deb9f4b8d0d1dd7c1034359ac5">   32</a></span>&#160;  <a class="code" href="structiterstate__t.html">iterstate_t</a> <a class="code" href="eval_8c.html#a3691308f2a4c2f6983f2880d32e29c84">s</a>[<a class="code" href="marktree_8h.html#a7bee4a62172040151049feb7aa61041e">MT_MAX_DEPTH</a>];</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;} <a class="code" href="structMarkTreeIter.html">MarkTreeIter</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// Internal storage</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// NB: actual marks have flags &gt; 0, so we can use (row,col,0) pseudo-key for</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// &quot;space before (row,col)&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="structmtkey__t.html">   39</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="structmtkey__t.html#ab390529960ce831bbc17bb018edfeb7f">   40</a></span>&#160;  <a class="code" href="structmtpos__t.html">mtpos_t</a> <a class="code" href="structmtkey__t.html#ab390529960ce831bbc17bb018edfeb7f">pos</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="structmtkey__t.html#af7df55232c59faafa4a22f7a4d5fa767">   41</a></span>&#160;  uint32_t <a class="code" href="structmtkey__t.html#af7df55232c59faafa4a22f7a4d5fa767">ns</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="structmtkey__t.html#a599c733a44c43c1ff58d602d90440a0d">   42</a></span>&#160;  uint32_t <a class="code" href="structmtkey__t.html#a599c733a44c43c1ff58d602d90440a0d">id</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structmtkey__t.html#abada43f00368440e72239ae46fa5a45c">   43</a></span>&#160;  int32_t <a class="code" href="structmtkey__t.html#abada43f00368440e72239ae46fa5a45c">hl_id</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structmtkey__t.html#adb93f30206f8fd623fbf2adb593d6dff">   44</a></span>&#160;  uint16_t <a class="code" href="structmtkey__t.html#adb93f30206f8fd623fbf2adb593d6dff">flags</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structmtkey__t.html#a3c8f5d673c17e4116318f7d3bcecaa8f">   45</a></span>&#160;  uint16_t <a class="code" href="structmtkey__t.html#a3c8f5d673c17e4116318f7d3bcecaa8f">priority</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structmtkey__t.html#a66efb7f613b4637e3b0a692915c36fb2">   46</a></span>&#160;  <a class="code" href="structDecoration.html">Decoration</a> *<a class="code" href="structmtkey__t.html#a66efb7f613b4637e3b0a692915c36fb2">decor_full</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;} <a class="code" href="structmtkey__t.html">mtkey_t</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="marktree_8h.html#af51a5e53b5d057ec97f74befcb0f6fab">   48</a></span>&#160;<span class="preprocessor">#define MT_INVALID_KEY (mtkey_t) { { -1, -1 }, 0, 0, 0, 0, 0, NULL }</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="marktree_8h.html#a1ca955d50b64bd60deb42c06fb7bd003">   50</a></span>&#160;<span class="preprocessor">#define MT_FLAG_REAL (((uint16_t)1) &lt;&lt; 0)</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="marktree_8h.html#a27ea0bd59666e9dc7b0aac39f77e349d">   51</a></span>&#160;<span class="preprocessor">#define MT_FLAG_END (((uint16_t)1) &lt;&lt; 1)</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="marktree_8h.html#a2f59db26ac867995579e65a0c4e7b98c">   52</a></span>&#160;<span class="preprocessor">#define MT_FLAG_PAIRED (((uint16_t)1) &lt;&lt; 2)</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="marktree_8h.html#a74bd52a9eed044479411342d93457fc3">   53</a></span>&#160;<span class="preprocessor">#define MT_FLAG_HL_EOL (((uint16_t)1) &lt;&lt; 3)</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="marktree_8h.html#a174bbf1e78e9f3c6cd2ff00e67ebae27">   55</a></span>&#160;<span class="preprocessor">#define DECOR_LEVELS 4</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="marktree_8h.html#aee6b24dcfc7dc0ae98c469014837591b">   56</a></span>&#160;<span class="preprocessor">#define MT_FLAG_DECOR_OFFSET 4</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="marktree_8h.html#a9f578f0b847c5ab7d163e595ba3b559a">   57</a></span>&#160;<span class="preprocessor">#define MT_FLAG_DECOR_MASK (((uint16_t)(DECOR_LEVELS - 1)) &lt;&lt; MT_FLAG_DECOR_OFFSET)</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// next flag is (((uint16_t)1) &lt;&lt; 6)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// These _must_ be last to preserve ordering of marks</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="marktree_8h.html#a6160fd90c16db59624622af822f23ab8">   62</a></span>&#160;<span class="preprocessor">#define MT_FLAG_RIGHT_GRAVITY (((uint16_t)1) &lt;&lt; 14)</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="marktree_8h.html#a6b7e2b0ae217e24b74f9c6b80b203c00">   63</a></span>&#160;<span class="preprocessor">#define MT_FLAG_LAST (((uint16_t)1) &lt;&lt; 15)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="marktree_8h.html#af07203e677a499565809297c84e988a6">   65</a></span>&#160;<span class="preprocessor">#define MT_FLAG_EXTERNAL_MASK (MT_FLAG_DECOR_MASK | MT_FLAG_RIGHT_GRAVITY | MT_FLAG_HL_EOL)</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="marktree_8h.html#a821c9c9950a147748f48613b804e09f3">   67</a></span>&#160;<span class="preprocessor">#define MARKTREE_END_FLAG (((uint64_t)1) &lt;&lt; 63)</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint64_t mt_lookup_id(uint32_t ns, uint32_t <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> enda)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">return</span> (uint64_t)ns &lt;&lt; 32 | <span class="keywordtype">id</span> | (enda?<a class="code" href="marktree_8h.html#a821c9c9950a147748f48613b804e09f3">MARKTREE_END_FLAG</a>:0);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#undef MARKTREE_END_FLAG</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint64_t mt_lookup_key(<a class="code" href="structmtkey__t.html">mtkey_t</a> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">return</span> mt_lookup_id(<a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>.ns, <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>.id, <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>.flags &amp; <a class="code" href="marktree_8h.html#a27ea0bd59666e9dc7b0aac39f77e349d">MT_FLAG_END</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> mt_paired(<a class="code" href="structmtkey__t.html">mtkey_t</a> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>.flags &amp; <a class="code" href="marktree_8h.html#a2f59db26ac867995579e65a0c4e7b98c">MT_FLAG_PAIRED</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> mt_end(<a class="code" href="structmtkey__t.html">mtkey_t</a> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>.flags &amp; <a class="code" href="marktree_8h.html#a27ea0bd59666e9dc7b0aac39f77e349d">MT_FLAG_END</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> mt_start(<a class="code" href="structmtkey__t.html">mtkey_t</a> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> mt_paired(<a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>) &amp;&amp; !mt_end(<a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> mt_right(<a class="code" href="structmtkey__t.html">mtkey_t</a> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>.flags &amp; <a class="code" href="marktree_8h.html#a6160fd90c16db59624622af822f23ab8">MT_FLAG_RIGHT_GRAVITY</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint8_t marktree_decor_level(<a class="code" href="structmtkey__t.html">mtkey_t</a> <a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">return</span> (uint8_t)((<a class="code" href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a>.flags&amp;<a class="code" href="marktree_8h.html#a9f578f0b847c5ab7d163e595ba3b559a">MT_FLAG_DECOR_MASK</a>) &gt;&gt; <a class="code" href="marktree_8h.html#aee6b24dcfc7dc0ae98c469014837591b">MT_FLAG_DECOR_OFFSET</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t mt_flags(<span class="keywordtype">bool</span> right_gravity, uint8_t decor_level)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="api_2private_2helpers_8c.html#a56994399a2ae47e656a0086f19e27359">assert</a>(decor_level &lt; <a class="code" href="marktree_8h.html#a174bbf1e78e9f3c6cd2ff00e67ebae27">DECOR_LEVELS</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">return</span> (uint16_t)((right_gravity ? <a class="code" href="marktree_8h.html#a6160fd90c16db59624622af822f23ab8">MT_FLAG_RIGHT_GRAVITY</a> : 0)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    | (decor_level &lt;&lt; <a class="code" href="marktree_8h.html#aee6b24dcfc7dc0ae98c469014837591b">MT_FLAG_DECOR_OFFSET</a>));</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="structmtnode__s.html">  111</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmtnode__s.html">mtnode_s</a> {</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="structmtnode__s.html#a0a4b933114cc86647e03644fda668ab5">  112</a></span>&#160;  int32_t <a class="code" href="structmtnode__s.html#a0a4b933114cc86647e03644fda668ab5">n</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="structmtnode__s.html#adb29fee29d0ec4d65f959d0cd99c6ff4">  113</a></span>&#160;  int32_t <a class="code" href="structmtnode__s.html#adb29fee29d0ec4d65f959d0cd99c6ff4">level</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// TODO(bfredl): we could consider having a only-sometimes-valid</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// index into parent for faster &quot;cached&quot; lookup.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="structmtnode__s.html#ae8be9c33b715cf4a86bb346a4ae1fe10">  116</a></span>&#160;  <a class="code" href="structmtnode__s.html">mtnode_t</a> *<a class="code" href="structmtnode__s.html#ae8be9c33b715cf4a86bb346a4ae1fe10">parent</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="structmtnode__s.html#a85bc0d9dfce84f7a33c3c9e0846b2bf0">  117</a></span>&#160;  <a class="code" href="structmtkey__t.html">mtkey_t</a> <a class="code" href="structmtnode__s.html#a85bc0d9dfce84f7a33c3c9e0846b2bf0">key</a>[2 * <a class="code" href="marktree_8h.html#a3d1558fd30d766d7805fa176d2a9a994">MT_BRANCH_FACTOR</a> - 1];</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="structmtnode__s.html#a5de406364482006446b18811ec5e0f4c">  118</a></span>&#160;  <a class="code" href="structmtnode__s.html">mtnode_t</a> *<a class="code" href="structmtnode__s.html#a5de406364482006446b18811ec5e0f4c">ptr</a>[];</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;};</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">// TODO(bfredl): the iterator is pretty much everpresent, make it part of the</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// tree struct itself?</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="structMarkTree.html">  123</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="structMarkTree.html#a1abeedc0b53111713ca16c30d1a94ee1">  124</a></span>&#160;  <a class="code" href="structmtnode__s.html">mtnode_t</a> *<a class="code" href="structMarkTree.html#a1abeedc0b53111713ca16c30d1a94ee1">root</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="structMarkTree.html#a2ff02700edd45ababf5dc86b9395b120">  125</a></span>&#160;  <span class="keywordtype">size_t</span> n_keys, <a class="code" href="structMarkTree.html#a2ff02700edd45ababf5dc86b9395b120">n_nodes</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// TODO(bfredl): the pointer to node could be part of the larger</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// Map(uint64_t, ExtmarkItem) essentially;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="map__defs_8h.html#a1962cf47c5b08783985ddb280d058b53">PMap</a>(uint64_t) id2node[1];</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;} <a class="code" href="structMarkTree.html">MarkTree</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#ifdef INCLUDE_GENERATED_DECLARATIONS</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor"># include &quot;marktree.h.generated.h&quot;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#endif  // NVIM_MARKTREE_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astructMarkTreeIter_html_a9d7a252a9e89392b2c04a16f027ed73d"><div class="ttname"><a href="structMarkTreeIter.html#a9d7a252a9e89392b2c04a16f027ed73d">MarkTreeIter::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> marktree.h:31</div></div>
<div class="ttc" id="astructmtkey__t_html_a66efb7f613b4637e3b0a692915c36fb2"><div class="ttname"><a href="structmtkey__t.html#a66efb7f613b4637e3b0a692915c36fb2">mtkey_t::decor_full</a></div><div class="ttdeci">Decoration * decor_full</div><div class="ttdef"><b>Definition:</b> marktree.h:46</div></div>
<div class="ttc" id="astructmtpos__t_html_a71c9d0f352c99e025208d8be42be505e"><div class="ttname"><a href="structmtpos__t.html#a71c9d0f352c99e025208d8be42be505e">mtpos_t::col</a></div><div class="ttdeci">int32_t col</div><div class="ttdef"><b>Definition:</b> marktree.h:18</div></div>
<div class="ttc" id="astructiterstate__t_html_a9ee20696c1947299a8fe7ca64f2966d9"><div class="ttname"><a href="structiterstate__t.html#a9ee20696c1947299a8fe7ca64f2966d9">iterstate_t::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> marktree.h:24</div></div>
<div class="ttc" id="astructMarkTreeIter_html_a50e2c9cf27566030f85518c9f39cd8d9"><div class="ttname"><a href="structMarkTreeIter.html#a50e2c9cf27566030f85518c9f39cd8d9">MarkTreeIter::pos</a></div><div class="ttdeci">mtpos_t pos</div><div class="ttdef"><b>Definition:</b> marktree.h:28</div></div>
<div class="ttc" id="amarktree_8h_html_a9f578f0b847c5ab7d163e595ba3b559a"><div class="ttname"><a href="marktree_8h.html#a9f578f0b847c5ab7d163e595ba3b559a">MT_FLAG_DECOR_MASK</a></div><div class="ttdeci">#define MT_FLAG_DECOR_MASK</div><div class="ttdef"><b>Definition:</b> marktree.h:57</div></div>
<div class="ttc" id="atypes_8h_html"><div class="ttname"><a href="types_8h.html">types.h</a></div></div>
<div class="ttc" id="astructiterstate__t_html"><div class="ttname"><a href="structiterstate__t.html">iterstate_t</a></div><div class="ttdef"><b>Definition:</b> marktree.h:22</div></div>
<div class="ttc" id="astructmtpos__t_html_a1492b94687ee7198d876c58e3671978b"><div class="ttname"><a href="structmtpos__t.html#a1492b94687ee7198d876c58e3671978b">mtpos_t::row</a></div><div class="ttdeci">int32_t row</div><div class="ttdef"><b>Definition:</b> marktree.h:17</div></div>
<div class="ttc" id="amarktree_8h_html_a6160fd90c16db59624622af822f23ab8"><div class="ttname"><a href="marktree_8h.html#a6160fd90c16db59624622af822f23ab8">MT_FLAG_RIGHT_GRAVITY</a></div><div class="ttdeci">#define MT_FLAG_RIGHT_GRAVITY</div><div class="ttdef"><b>Definition:</b> marktree.h:62</div></div>
<div class="ttc" id="aassert_8h_html"><div class="ttname"><a href="assert_8h.html">assert.h</a></div></div>
<div class="ttc" id="astructmtkey__t_html_abada43f00368440e72239ae46fa5a45c"><div class="ttname"><a href="structmtkey__t.html#abada43f00368440e72239ae46fa5a45c">mtkey_t::hl_id</a></div><div class="ttdeci">int32_t hl_id</div><div class="ttdef"><b>Definition:</b> marktree.h:43</div></div>
<div class="ttc" id="amarktree_8h_html_a174bbf1e78e9f3c6cd2ff00e67ebae27"><div class="ttname"><a href="marktree_8h.html#a174bbf1e78e9f3c6cd2ff00e67ebae27">DECOR_LEVELS</a></div><div class="ttdeci">#define DECOR_LEVELS</div><div class="ttdef"><b>Definition:</b> marktree.h:55</div></div>
<div class="ttc" id="akeycodes_8c_html_a1cb96f069b23b46e883c5c86ad2dae34"><div class="ttname"><a href="keycodes_8c.html#a1cb96f069b23b46e883c5c86ad2dae34">key</a></div><div class="ttdeci">int key</div><div class="ttdef"><b>Definition:</b> keycodes.c:571</div></div>
<div class="ttc" id="astructmtnode__s_html_adb29fee29d0ec4d65f959d0cd99c6ff4"><div class="ttname"><a href="structmtnode__s.html#adb29fee29d0ec4d65f959d0cd99c6ff4">mtnode_s::level</a></div><div class="ttdeci">int32_t level</div><div class="ttdef"><b>Definition:</b> marktree.h:113</div></div>
<div class="ttc" id="amarktree_8h_html_a2f59db26ac867995579e65a0c4e7b98c"><div class="ttname"><a href="marktree_8h.html#a2f59db26ac867995579e65a0c4e7b98c">MT_FLAG_PAIRED</a></div><div class="ttdeci">#define MT_FLAG_PAIRED</div><div class="ttdef"><b>Definition:</b> marktree.h:52</div></div>
<div class="ttc" id="astructmtkey__t_html_ab390529960ce831bbc17bb018edfeb7f"><div class="ttname"><a href="structmtkey__t.html#ab390529960ce831bbc17bb018edfeb7f">mtkey_t::pos</a></div><div class="ttdeci">mtpos_t pos</div><div class="ttdef"><b>Definition:</b> marktree.h:40</div></div>
<div class="ttc" id="astructMarkTree_html_a2ff02700edd45ababf5dc86b9395b120"><div class="ttname"><a href="structMarkTree.html#a2ff02700edd45ababf5dc86b9395b120">MarkTree::n_nodes</a></div><div class="ttdeci">size_t n_nodes</div><div class="ttdef"><b>Definition:</b> marktree.h:125</div></div>
<div class="ttc" id="astructmtpos__t_html"><div class="ttname"><a href="structmtpos__t.html">mtpos_t</a></div><div class="ttdef"><b>Definition:</b> marktree.h:16</div></div>
<div class="ttc" id="astructmtnode__s_html"><div class="ttname"><a href="structmtnode__s.html">mtnode_s</a></div><div class="ttdef"><b>Definition:</b> marktree.h:111</div></div>
<div class="ttc" id="astructmtkey__t_html"><div class="ttname"><a href="structmtkey__t.html">mtkey_t</a></div><div class="ttdef"><b>Definition:</b> marktree.h:39</div></div>
<div class="ttc" id="astructMarkTreeIter_html"><div class="ttname"><a href="structMarkTreeIter.html">MarkTreeIter</a></div><div class="ttdef"><b>Definition:</b> marktree.h:27</div></div>
<div class="ttc" id="astructmtkey__t_html_af7df55232c59faafa4a22f7a4d5fa767"><div class="ttname"><a href="structmtkey__t.html#af7df55232c59faafa4a22f7a4d5fa767">mtkey_t::ns</a></div><div class="ttdeci">uint32_t ns</div><div class="ttdef"><b>Definition:</b> marktree.h:41</div></div>
<div class="ttc" id="astructmtnode__s_html_a0a4b933114cc86647e03644fda668ab5"><div class="ttname"><a href="structmtnode__s.html#a0a4b933114cc86647e03644fda668ab5">mtnode_s::n</a></div><div class="ttdeci">int32_t n</div><div class="ttdef"><b>Definition:</b> marktree.h:112</div></div>
<div class="ttc" id="amarktree_8h_html_a821c9c9950a147748f48613b804e09f3"><div class="ttname"><a href="marktree_8h.html#a821c9c9950a147748f48613b804e09f3">MARKTREE_END_FLAG</a></div><div class="ttdeci">#define MARKTREE_END_FLAG</div><div class="ttdef"><b>Definition:</b> marktree.h:67</div></div>
<div class="ttc" id="astructMarkTree_html_a1abeedc0b53111713ca16c30d1a94ee1"><div class="ttname"><a href="structMarkTree.html#a1abeedc0b53111713ca16c30d1a94ee1">MarkTree::root</a></div><div class="ttdeci">mtnode_t * root</div><div class="ttdef"><b>Definition:</b> marktree.h:124</div></div>
<div class="ttc" id="astructmtkey__t_html_a3c8f5d673c17e4116318f7d3bcecaa8f"><div class="ttname"><a href="structmtkey__t.html#a3c8f5d673c17e4116318f7d3bcecaa8f">mtkey_t::priority</a></div><div class="ttdeci">uint16_t priority</div><div class="ttdef"><b>Definition:</b> marktree.h:45</div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="aapi_2private_2helpers_8c_html_a56994399a2ae47e656a0086f19e27359"><div class="ttname"><a href="api_2private_2helpers_8c.html#a56994399a2ae47e656a0086f19e27359">assert</a></div><div class="ttdeci">assert(len &gt;=0)</div></div>
<div class="ttc" id="amarktree_8h_html_aee6b24dcfc7dc0ae98c469014837591b"><div class="ttname"><a href="marktree_8h.html#aee6b24dcfc7dc0ae98c469014837591b">MT_FLAG_DECOR_OFFSET</a></div><div class="ttdeci">#define MT_FLAG_DECOR_OFFSET</div><div class="ttdef"><b>Definition:</b> marktree.h:56</div></div>
<div class="ttc" id="aeval_8c_html_a3691308f2a4c2f6983f2880d32e29c84"><div class="ttname"><a href="eval_8c.html#a3691308f2a4c2f6983f2880d32e29c84">s</a></div><div class="ttdeci">char * s</div><div class="ttdef"><b>Definition:</b> eval.c:795</div></div>
<div class="ttc" id="astructMarkTreeIter_html_a8a6b6665a7d8979c91e3fee3cb9e63f3"><div class="ttname"><a href="structMarkTreeIter.html#a8a6b6665a7d8979c91e3fee3cb9e63f3">MarkTreeIter::node</a></div><div class="ttdeci">mtnode_t * node</div><div class="ttdef"><b>Definition:</b> marktree.h:30</div></div>
<div class="ttc" id="astructmtnode__s_html_a85bc0d9dfce84f7a33c3c9e0846b2bf0"><div class="ttname"><a href="structmtnode__s.html#a85bc0d9dfce84f7a33c3c9e0846b2bf0">mtnode_s::key</a></div><div class="ttdeci">mtkey_t key[2 *MT_BRANCH_FACTOR - 1]</div><div class="ttdef"><b>Definition:</b> marktree.h:117</div></div>
<div class="ttc" id="astructmtnode__s_html_a5de406364482006446b18811ec5e0f4c"><div class="ttname"><a href="structmtnode__s.html#a5de406364482006446b18811ec5e0f4c">mtnode_s::ptr</a></div><div class="ttdeci">mtnode_t * ptr[]</div><div class="ttdef"><b>Definition:</b> marktree.h:118</div></div>
<div class="ttc" id="astructMarkTreeIter_html_a41ac630c588c4c8c7279f75de01af7ef"><div class="ttname"><a href="structMarkTreeIter.html#a41ac630c588c4c8c7279f75de01af7ef">MarkTreeIter::lvl</a></div><div class="ttdeci">int lvl</div><div class="ttdef"><b>Definition:</b> marktree.h:29</div></div>
<div class="ttc" id="astructmtkey__t_html_a599c733a44c43c1ff58d602d90440a0d"><div class="ttname"><a href="structmtkey__t.html#a599c733a44c43c1ff58d602d90440a0d">mtkey_t::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> marktree.h:42</div></div>
<div class="ttc" id="astructMarkTree_html"><div class="ttname"><a href="structMarkTree.html">MarkTree</a></div><div class="ttdef"><b>Definition:</b> marktree.h:123</div></div>
<div class="ttc" id="agarray_8h_html"><div class="ttname"><a href="garray_8h.html">garray.h</a></div></div>
<div class="ttc" id="astructiterstate__t_html_a719ba31fd2ccb40c217d70f7730720ec"><div class="ttname"><a href="structiterstate__t.html#a719ba31fd2ccb40c217d70f7730720ec">iterstate_t::oldcol</a></div><div class="ttdeci">int oldcol</div><div class="ttdef"><b>Definition:</b> marktree.h:23</div></div>
<div class="ttc" id="amarktree_8h_html_a7bee4a62172040151049feb7aa61041e"><div class="ttname"><a href="marktree_8h.html#a7bee4a62172040151049feb7aa61041e">MT_MAX_DEPTH</a></div><div class="ttdeci">#define MT_MAX_DEPTH</div><div class="ttdef"><b>Definition:</b> marktree.h:13</div></div>
<div class="ttc" id="amarktree_8h_html_a27ea0bd59666e9dc7b0aac39f77e349d"><div class="ttname"><a href="marktree_8h.html#a27ea0bd59666e9dc7b0aac39f77e349d">MT_FLAG_END</a></div><div class="ttdeci">#define MT_FLAG_END</div><div class="ttdef"><b>Definition:</b> marktree.h:51</div></div>
<div class="ttc" id="amap__defs_8h_html_a1962cf47c5b08783985ddb280d058b53"><div class="ttname"><a href="map__defs_8h.html#a1962cf47c5b08783985ddb280d058b53">PMap</a></div><div class="ttdeci">#define PMap(T)</div><div class="ttdef"><b>Definition:</b> map_defs.h:10</div></div>
<div class="ttc" id="amarktree_8h_html_a3d1558fd30d766d7805fa176d2a9a994"><div class="ttname"><a href="marktree_8h.html#a3d1558fd30d766d7805fa176d2a9a994">MT_BRANCH_FACTOR</a></div><div class="ttdeci">#define MT_BRANCH_FACTOR</div><div class="ttdef"><b>Definition:</b> marktree.h:14</div></div>
<div class="ttc" id="astructDecoration_html"><div class="ttname"><a href="structDecoration.html">Decoration</a></div><div class="ttdef"><b>Definition:</b> decoration.h:36</div></div>
<div class="ttc" id="apos_8h_html"><div class="ttname"><a href="pos_8h.html">pos.h</a></div></div>
<div class="ttc" id="astructmtnode__s_html_ae8be9c33b715cf4a86bb346a4ae1fe10"><div class="ttname"><a href="structmtnode__s.html#ae8be9c33b715cf4a86bb346a4ae1fe10">mtnode_s::parent</a></div><div class="ttdeci">mtnode_t * parent</div><div class="ttdef"><b>Definition:</b> marktree.h:116</div></div>
<div class="ttc" id="astructmtkey__t_html_adb93f30206f8fd623fbf2adb593d6dff"><div class="ttname"><a href="structmtkey__t.html#adb93f30206f8fd623fbf2adb593d6dff">mtkey_t::flags</a></div><div class="ttdeci">uint16_t flags</div><div class="ttdef"><b>Definition:</b> marktree.h:44</div></div>
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<footer>
  <div class="container">
    Generated on Wed Jun 1 2022 11:19:18 for Neovim by
    <a href="http://www.doxygen.org/index.html">Doxygen</a>
    1.8.17
  </div>
</footer>
</body>
</html>
